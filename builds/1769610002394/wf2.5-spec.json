{
  "meta": {
    "buildId": "1769610002394",
    "repoOwner": "AnouarY02",
    "repoName": "ai-app-saas",
    "branch": "build-1769610002394",
    "appName": "TaskFlow Pro",
    "baseBranch": "main"
  },
  "functionalitySpec": {
    "apiContracts": [
      {
        "endpoint": "/api/tasks",
        "method": "GET",
        "description": "Retrieve all tasks for the authenticated user",
        "auth": "user",
        "requestType": "GetTasksRequest",
        "responseType": "GetTasksResponse",
        "schemasUsed": [
          "GetTasksSchema"
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ],
        "internalImports": [
          {
            "from": "@/lib/db",
            "importStatement": "import { db } from '@/lib/db';"
          }
        ],
        "handler": {
          "file": "src/app/api/tasks/route.ts",
          "signature": "GET(req: NextRequest): Promise<NextResponse>"
        },
        "dbOps": [
          {
            "op": "select",
            "table": "tasks",
            "notes": "Retrieve tasks for the authenticated user"
          }
        ],
        "errorCases": [
          {
            "status": 401,
            "condition": "User not authenticated",
            "message": "Authentication required"
          }
        ]
      },
      {
        "endpoint": "/api/tasks",
        "method": "POST",
        "description": "Create a new task",
        "auth": "user",
        "requestType": "CreateTaskRequest",
        "responseType": "CreateTaskResponse",
        "schemasUsed": [
          "CreateTaskSchema"
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ],
        "internalImports": [
          {
            "from": "@/lib/db",
            "importStatement": "import { db } from '@/lib/db';"
          }
        ],
        "handler": {
          "file": "src/app/api/tasks/route.ts",
          "signature": "POST(req: NextRequest): Promise<NextResponse>"
        },
        "dbOps": [
          {
            "op": "insert",
            "table": "tasks",
            "notes": "Insert new task record"
          }
        ],
        "errorCases": [
          {
            "status": 400,
            "condition": "Invalid input",
            "message": "Validation failed"
          },
          {
            "status": 401,
            "condition": "User not authenticated",
            "message": "Authentication required"
          }
        ]
      },
      {
        "endpoint": "/api/tasks/[id]",
        "method": "GET",
        "description": "Retrieve a specific task by ID",
        "auth": "user",
        "requestType": "GetTaskByIdRequest",
        "responseType": "GetTaskByIdResponse",
        "schemasUsed": [
          "GetTaskByIdSchema"
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ],
        "internalImports": [
          {
            "from": "@/lib/db",
            "importStatement": "import { db } from '@/lib/db';"
          }
        ],
        "handler": {
          "file": "src/app/api/tasks/[id]/route.ts",
          "signature": "GET(req: NextRequest): Promise<NextResponse>"
        },
        "dbOps": [
          {
            "op": "select",
            "table": "tasks",
            "notes": "Retrieve task by ID"
          }
        ],
        "errorCases": [
          {
            "status": 404,
            "condition": "Task not found",
            "message": "No task found with the given ID"
          },
          {
            "status": 401,
            "condition": "User not authenticated",
            "message": "Authentication required"
          }
        ]
      },
      {
        "endpoint": "/api/tasks/[id]",
        "method": "PUT",
        "description": "Update a specific task by ID",
        "auth": "user",
        "requestType": "UpdateTaskRequest",
        "responseType": "UpdateTaskResponse",
        "schemasUsed": [
          "UpdateTaskSchema"
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ],
        "internalImports": [
          {
            "from": "@/lib/db",
            "importStatement": "import { db } from '@/lib/db';"
          }
        ],
        "handler": {
          "file": "src/app/api/tasks/[id]/route.ts",
          "signature": "PUT(req: NextRequest): Promise<NextResponse>"
        },
        "dbOps": [
          {
            "op": "update",
            "table": "tasks",
            "notes": "Update task record by ID"
          }
        ],
        "errorCases": [
          {
            "status": 400,
            "condition": "Invalid input",
            "message": "Validation failed"
          },
          {
            "status": 404,
            "condition": "Task not found",
            "message": "No task found with the given ID"
          },
          {
            "status": 401,
            "condition": "User not authenticated",
            "message": "Authentication required"
          }
        ]
      },
      {
        "endpoint": "/api/tasks/[id]",
        "method": "DELETE",
        "description": "Delete a specific task by ID",
        "auth": "user",
        "requestType": "DeleteTaskRequest",
        "responseType": "DeleteTaskResponse",
        "schemasUsed": [
          "DeleteTaskSchema"
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ],
        "internalImports": [
          {
            "from": "@/lib/db",
            "importStatement": "import { db } from '@/lib/db';"
          }
        ],
        "handler": {
          "file": "src/app/api/tasks/[id]/route.ts",
          "signature": "DELETE(req: NextRequest): Promise<NextResponse>"
        },
        "dbOps": [
          {
            "op": "delete",
            "table": "tasks",
            "notes": "Delete task record by ID"
          }
        ],
        "errorCases": [
          {
            "status": 404,
            "condition": "Task not found",
            "message": "No task found with the given ID"
          },
          {
            "status": 401,
            "condition": "User not authenticated",
            "message": "Authentication required"
          }
        ]
      }
    ],
    "sharedTypes": [
      {
        "name": "Task",
        "file": "src/shared/types/task.types.ts",
        "kind": "interface",
        "fields": [
          {
            "name": "id",
            "type": "string",
            "optional": false
          },
          {
            "name": "title",
            "type": "string",
            "optional": false
          },
          {
            "name": "description",
            "type": "string",
            "optional": true
          },
          {
            "name": "status",
            "type": "'pending' | 'in-progress' | 'completed'",
            "optional": false
          },
          {
            "name": "priority",
            "type": "'low' | 'medium' | 'high'",
            "optional": false
          },
          {
            "name": "dueDate",
            "type": "Date",
            "optional": true
          }
        ]
      },
      {
        "name": "CreateTaskRequest",
        "file": "src/shared/types/task.types.ts",
        "kind": "interface",
        "fields": [
          {
            "name": "title",
            "type": "string",
            "optional": false
          },
          {
            "name": "description",
            "type": "string",
            "optional": true
          },
          {
            "name": "status",
            "type": "'pending' | 'in-progress' | 'completed'",
            "optional": false
          },
          {
            "name": "priority",
            "type": "'low' | 'medium' | 'high'",
            "optional": false
          },
          {
            "name": "dueDate",
            "type": "Date",
            "optional": true
          }
        ]
      },
      {
        "name": "UpdateTaskRequest",
        "file": "src/shared/types/task.types.ts",
        "kind": "interface",
        "fields": [
          {
            "name": "title",
            "type": "string",
            "optional": true
          },
          {
            "name": "description",
            "type": "string",
            "optional": true
          },
          {
            "name": "status",
            "type": "'pending' | 'in-progress' | 'completed'",
            "optional": true
          },
          {
            "name": "priority",
            "type": "'low' | 'medium' | 'high'",
            "optional": true
          },
          {
            "name": "dueDate",
            "type": "Date",
            "optional": true
          }
        ]
      },
      {
        "name": "DeleteBookingRequest",
        "file": "src/shared/types/booking.types.ts",
        "kind": "interface",
        "fields": [
          {
            "name": "bookingId",
            "type": "string",
            "optional": false,
            "description": "Booking id"
          }
        ]
      },
      {
        "name": "CancelBookingResponse",
        "file": "src/shared/types/booking.types.ts",
        "kind": "interface",
        "fields": [
          {
            "name": "bookingId",
            "type": "string",
            "optional": false,
            "description": "Cancelled booking id"
          },
          {
            "name": "status",
            "type": "'cancelled'",
            "optional": false,
            "description": "Always cancelled"
          }
        ]
      }
    ],
    "schemas": [
      {
        "name": "CreateTaskSchema",
        "file": "src/shared/schemas/task.schemas.ts",
        "forType": "CreateTaskRequest",
        "shape": [
          {
            "field": "title",
            "zod": "z.string().min(1)"
          },
          {
            "field": "description",
            "zod": "z.string().optional()"
          },
          {
            "field": "status",
            "zod": "z.enum(['pending', 'in-progress', 'completed'])"
          },
          {
            "field": "priority",
            "zod": "z.enum(['low', 'medium', 'high'])"
          },
          {
            "field": "dueDate",
            "zod": "z.date().optional()"
          }
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ]
      },
      {
        "name": "UpdateTaskSchema",
        "file": "src/shared/schemas/task.schemas.ts",
        "forType": "UpdateTaskRequest",
        "shape": [
          {
            "field": "title",
            "zod": "z.string().min(1).optional()"
          },
          {
            "field": "description",
            "zod": "z.string().optional()"
          },
          {
            "field": "status",
            "zod": "z.enum(['pending', 'in-progress', 'completed']).optional()"
          },
          {
            "field": "priority",
            "zod": "z.enum(['low', 'medium', 'high']).optional()"
          },
          {
            "field": "dueDate",
            "zod": "z.date().optional()"
          }
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ]
      },
      {
        "name": "GetTaskByIdSchema",
        "file": "src/shared/schemas/task.schemas.ts",
        "forType": "GetTaskByIdRequest",
        "shape": [
          {
            "field": "id",
            "zod": "z.string().uuid()"
          }
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ]
      },
      {
        "name": "CancelBookingSchema",
        "file": "src/shared/schemas/booking.schemas.ts",
        "forType": "DeleteBookingRequest",
        "shape": [
          {
            "field": "bookingId",
            "zod": "z.string().uuid()"
          }
        ],
        "dependencies": [
          {
            "package": "zod",
            "version": "^3.22.0",
            "importStatement": "import { z } from 'zod';"
          }
        ]
      }
    ],
    "databaseSchema": {
      "tables": [
        {
          "name": "tasks",
          "columns": [
            {
              "name": "id",
              "type": "uuid",
              "constraints": [
                "PRIMARY KEY"
              ]
            },
            {
              "name": "user_id",
              "type": "uuid",
              "constraints": [
                "NOT NULL"
              ]
            },
            {
              "name": "title",
              "type": "varchar(255)",
              "constraints": [
                "NOT NULL"
              ]
            },
            {
              "name": "description",
              "type": "text",
              "constraints": []
            },
            {
              "name": "status",
              "type": "varchar(50)",
              "constraints": [
                "NOT NULL"
              ]
            },
            {
              "name": "priority",
              "type": "varchar(50)",
              "constraints": [
                "NOT NULL"
              ]
            },
            {
              "name": "due_date",
              "type": "timestamp",
              "constraints": []
            }
          ],
          "indexes": [
            {
              "name": "idx_tasks_user",
              "columns": [
                "user_id"
              ]
            },
            {
              "name": "idx_tasks_status",
              "columns": [
                "status"
              ]
            }
          ]
        }
      ]
    }
  }
}